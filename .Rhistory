rvest::html_nodes(".no-border td") %>%
rvest::html_text()
View(data_scrape)
epex_sp <-
rvest::html("http://www.epexspot.com/en/market-data/auction")
data_scrape <- epex_sp %>%
rvest::html_nodes(".no-border td") %>%
rvest::html_table()
data_scrape <- epex_sp %>%
rvest::html_nodes(".no-border td")
data_scrape
data_scrape <- epex_sp %>%
rvest::html_nodes("td") %>%
rvest::html_table()
data_scrape <- epex_sp %>%
rvest::html_nodes(".hours td , .hours th")
data_scrape <- epex_sp %>%
rvest::html_nodes(".hours td , .hours th") %>%
rvest::html_table()
data_scrape <- epex_sp %>%
rvest::html_nodes(".hours td , .hours th") %>%
rvest::html_text()
View(data_scrape)
data_scrape <- epex_sp %>%
rvest::html_nodes("tr :nth-child(9)") %>%
rvest::html_text()
View(data_scrape)
data_scrape <- epex_sp %>%
rvest::html_nodes("d:nth-child(9)") %>%
rvest::html_text()
data_scrape <- epex_sp %>%
rvest::html_nodes("td:nth-child(9)") %>%
rvest::html_text()
View(data_scrape)
data_scrape <- epex_sp %>%
rvest::html_nodes("td:nth-child(9)")
data_scrape
View(data_scrape)
data_scrape <- epex_sp %>%
rvest::html_nodes(".DE td:nth-child(9)") %>%
rvest::html_text()
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_scrape
spot <- data_scrape[c(TRUE, FALSE)]
spot <- data_scrape[c(TRUE, FALSE)]
volume <- data_scrape[c(FALSE, TRUE)]
volume
spot
epex_sp <-
rvest::html("http://www.epexspot.com/en/market-data/auction/auction-table/2014-10-18/DE")
data_scrape <- epex_sp %>%
rvest::html_nodes("td:nth-child(9)") %>%
rvest::html_text()
epex_sp <-
rvest::html("http://www.epexspot.com/en/market-data/auction/auction-table/2014-10-18/DE")
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
epex_sp <-
rvest::html("http://www.epexspot.com/en/market-data/auction/auction-table/2014-10-17/DE")
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
?seq
from_date <- "2012-01-01"
to_date <- "2014-10-18"
date_scrape <- seq(as.Date(from_date), as.Date(to_date), 1)
as.Date(from_date)
date_scrape <- seq(as.Date(from_date), as.Date(to_date), by = 1)
date_scrape
View(date_scrape)
from_date-6
as.Date(from_date)-6
str(date_scrape)
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
ii=1
paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country)
country <- "DE'"
country <- "DE"
paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country)
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = 1:24,
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price("2012-01-01", "2014-10-24", "DE")
spot_price <- scrape_epex_spot("2012-01-01", "2014-10-24", "DE")
spot_price("2014-10-01", "2014-10-24", "DE")
spot_price <- scrape_epex_spot("2014-10-01", "2014-10-24", "DE")
spot_price <- scrape_epex_spot("2012-10-01", "2014-10-24", "DE")
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = 1:25,
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-10-01", "2014-10-24", "DE")
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = ifelse(length(data_scrape) == 25, 1:25, 1:24),
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = ifelse(length(data_scrape) == 50, 1:25, 1:24),
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-10-01", "2014-10-24", "DE")
warnings()
View(spot_price)
spot_price <- scrape_epex_spot("2012-10-01", "2012-11-24", "DE")
spot_price <- scrape_epex_spot("2012-10-01", "2012-11-24", "DE")
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = ifelse(length(data_scrape) == 50, 1:25, 1:24),
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-10-01", "2012-11-24", "DE")
View(spot_price)
?ifelse
length(data_scrape)
ifelse(length(data_scrape) > 48, 1:25, 1:24)
ifelse(length(data_scrape) > 48, (1:25), (1:24))
1:15
c(1:15)
ifelse(length(data_scrape) > 48, c(1:25), c(1:24))
ifelse(length(data_scrape) > 48, return(1:25), c(1:24))
ifelse(length(data_scrape) > 48, return(1:25), return(1:24))
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = if(length(data_scrape) > 48) c(1:25) else c(1:24)),
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = if(length(data_scrape) > 48) c(1:25) else c(1:24)),
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = if(length(data_scrape) > 48) 1:25 else 1:24,
spot = data_scrape[c(TRUE, FALSE)] %>% as.numeric,
volume = data_scrape[c(FALSE, TRUE)]  %>% gsub(",", "", .) %>% as.numeric)
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-10-01", "2012-11-24", "DE")
View(spot_price)
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2014-10-22",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_scrape
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-10-22",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_scrape
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-10-23",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text()
data_scrape
test <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() as.numeric
test <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
as.numeric
test <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric
test
?na
?is.na
?na.rm
?na.omit
test <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = if(length(data_scrape) > 48) 1:25 else 1:24,
spot = data_scrape[c(TRUE, FALSE)],
volume = data_scrape[c(FALSE, TRUE)])
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-10-01", "2012-11-24", "DE")
View(spot_price)
1320/24
c(1:3,3:24)
c(1:2,4:24)
if(length(data_scrape) > 48) c(1:3,3:24)
else if(length(data_scrape) < 48) c(1:2,4:24)
else 1:24
if(length(data_scrape) > 48) {c(1:3,3:24)}
else if(length(data_scrape) < 48) {c(1:2,4:24)}
else {1:24}
if(length(data_scrape) > 48) {c(1:3,3:24)} else if(length(data_scrape) < 48) {c(1:2,4:24)} else {1:24}
if(length(data_scrape) > 48) c(1:3,3:24) else if(length(data_scrape) < 48) c(1:2,4:24) else 1:24
spot_price <- scrape_epex_spot("2012-01-01", "2014-10-24", "DE")
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-03-25",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
data_scrape
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-03-24",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-03-25",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
"2012-03-26",
"/",
"DE"))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
scrape_epex_spot <- function(from_date, to_date, country) {
cat("Initialising scraping routine, getting dates ...\n")
time_stamp <- Sys.time()
date_scrape <- seq(as.Date(from_date) -6, as.Date(to_date) -6, by = 1) %>%
as.character
data_out <- list()
for (ii in 1:length(date_scrape)) {
epex_sp <-
rvest::html(paste0("http://www.epexspot.com/en/market-data/auction/aucti",
"on-table/",
date_scrape[ii],
"/",
country))
data_scrape <- epex_sp %>%
rvest::html_nodes("#tab_de td:nth-child(9)") %>%
rvest::html_text() %>%
gsub(",", "", .) %>%
as.numeric %>%
na.omit
data_out[[ii]] <- data.frame(
date = date_scrape[ii] %>% as.Date %>% magrittr::add(6),
hour = if(length(data_scrape) > 48) c(1:3,3:24) else if(length(data_scrape) < 48) c(1:2,4:24) else 1:24,
spot = data_scrape[c(TRUE, FALSE)],
volume = data_scrape[c(FALSE, TRUE)])
cat(paste0(as.character(as.Date(date_scrape[ii]) + 6), " ...\n"))
}
data_out <- dplyr::rbind_all(data_out)
cat("Data downloaded, exiting function\n")
return(data_out)
}
spot_price <- scrape_epex_spot("2012-01-01", "2014-10-24", "DE")
warnings()
View(spot_price)
tail(spotprice)
tail(spot_price)
